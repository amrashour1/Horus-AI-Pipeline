# نظام النماذج وتوزيع المهام في مشروع Horus AI Pipeline

<div dir="rtl">

## نظرة عامة

يقدم هذا المستند وصفاً للتحديثات الجديدة في نظام النماذج وتوزيع المهام في مشروع Horus AI Pipeline. تم تصميم النظام لإدارة ومعالجة البيانات عبر مجموعة متنوعة من نماذج الذكاء الاصطناعي، مع التركيز على المرونة والقابلية للتوسع والأداء العالي.

## الهيكل العام

يتكون النظام من ثلاثة مكونات رئيسية:

### 1. نماذج الذكاء الاصطناعي (AI Models)

تم تنظيم النماذج في هيكل هرمي يتيح التوسع بسهولة:

```
models/
  ├── base_model.py         # الفئة الأساسية التي ترثها جميع النماذج
  ├── text_processing/      # نماذج معالجة النصوص
  │   ├── nlp_model.py      # نموذج معالجة اللغات الطبيعية
  │   └── sentiment_model.py # نموذج تحليل المشاعر
  ├── image_processing/     # نماذج معالجة الصور
  │   └── object_detection.py # نموذج كشف الكائنات
  └── hybrid/               # نماذج هجينة
```

### 2. نظام توزيع المهام (Task Distribution)

يتولى هذا المكون مسؤولية توزيع المهام بين النماذج المتاحة:

```
task_distribution/
  ├── task_scheduler.py     # جدولة وإدارة المهام
  └── load_balancer.py      # موازنة الحمل بين نسخ النماذج المتعددة
```

### 3. نظام سير العمل (Workflow)

يدير تدفق البيانات والمعالجة عبر مراحل متعددة:

```
workflow/
  ├── pipeline.py           # إدارة خط الأنابيب ومراحل المعالجة
  ├── data_preprocessing/   # معالجة البيانات قبل إدخالها للنماذج
  ├── model_integration/    # تكامل النماذج
  └── output_processing/    # معالجة مخرجات النماذج
```

## الميزات الرئيسية

### نماذج متعددة اللغات

- **معالجة النصوص العربية**: دعم كامل للغة العربية في جميع نماذج معالجة النصوص
- **تحليل المشاعر**: قدرة على تحليل المشاعر في النصوص العربية
- **استخراج المعلومات**: استخراج الكيانات والمعلومات من النصوص

### نظام توزيع متقدم

- **استراتيجيات توزيع متعددة**: دعم استراتيجيات مختلفة لتوزيع الحمل (الأقل حمولة، التناوب الدائري، العشوائي)
- **فحص الصحة**: مراقبة مستمرة لصحة نسخ النماذج
- **موازنة الحمل**: توزيع المهام بشكل متوازن حسب قدرة كل نموذج

### خط أنابيب مرن

- **مراحل متعددة**: إمكانية إنشاء خط أنابيب بمراحل معالجة متعددة
- **معالجة قبلية وبعدية**: إضافة معالجة مخصصة قبل وبعد تنفيذ النماذج
- **إحصاءات الأداء**: جمع وعرض إحصاءات حول أداء خط الأنابيب

## استخدام النظام

### إنشاء نموذج جديد

1. إنشاء فئة ترث من `BaseModel`
2. تنفيذ الطرق المطلوبة: `load()`, `process()`, `train()`
3. تسجيل النموذج في خط الأنابيب

### إنشاء مهمة جديدة

```python
from task_distribution.task_scheduler import TaskScheduler

scheduler = TaskScheduler()
task = scheduler.create_task({
    'task_type': 'text_analysis',
    'text': 'نص للتحليل باللغة العربية',
    'priority': 2
})
```

### إعداد خط الأنابيب

```python
from workflow.pipeline import Pipeline
from models.text_processing.nlp_model import NLPModel
from models.text_processing.sentiment_model import SentimentModel

pipeline = Pipeline()

# إنشاء النماذج
nlp_model = NLPModel('nlp_1', {'language': 'ar'})
sentiment_model = SentimentModel('sentiment_1')

# تحميل النماذج
nlp_model.load()
sentiment_model.load()

# إضافة مراحل المعالجة
pipeline.add_stage('text_analysis', [nlp_model])
pipeline.add_stage('sentiment_analysis', [sentiment_model])

# تنفيذ المهمة
result = pipeline.execute(task)
```

## التكامل مع نظام قائمة المهام

تم إضافة تكامل مع نظام قائمة المهام الحالي (Todo Agent) ليتمكن من:

1. **تتبع مهام النماذج**: إمكانية تتبع مهام معالجة البيانات وتوزيعها
2. **عرض حالة النماذج**: مراقبة حالة وأداء النماذج المختلفة
3. **تسجيل الإحصاءات**: حفظ إحصاءات الاستخدام والأداء في قاعدة البيانات

## الخطط المستقبلية

1. **واجهة برمجة تطبيقات (API)**: إضافة واجهة RESTful لتسهيل التفاعل مع النظام
2. **واجهة مستخدم رسومية**: تطوير واجهة مستخدم لمراقبة وإدارة النماذج والمهام
3. **نماذج إضافية**: إضافة نماذج جديدة لمعالجة الصوت والفيديو
4. **تخزين النتائج**: تحسين نظام تخزين واسترجاع نتائج المعالجة

## متطلبات النظام

- Python 3.8 أو أحدث
- قاعدة بيانات MySQL
- مكتبات البيانات والتعلم الآلي (حسب النماذج المستخدمة)

</div>
